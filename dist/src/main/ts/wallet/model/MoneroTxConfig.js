"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _assert = _interopRequireDefault(require("assert"));
var _MoneroDestination = _interopRequireDefault(require("./MoneroDestination"));
var _MoneroError = _interopRequireDefault(require("../../common/MoneroError"));


/**
 * Configures a transaction to send, sweep, or create a payment URI.
 */
class MoneroTxConfig {
  /** Single destination address (required unless `destinations` provided). */


  /** Single destination amount (required unless `destinations provided). */


  /** Source account index to transfer funds from (required unless sweeping key image). */


  /** Source subaddress index to send funds from (default all). */


  /** Source subaddresses to send funds from (default all). */


  /** Relay the transaction to peers to commit to the blockchain if true (default false). */


  /** Transaction priority to adjust the miner fee (default MoneroTxPriority.NORMAL). */


  /** Multiple destinations to send funds to, if applicable. */


  /** List of destination indices to split the miner fee (optional). */


  /** Payment ID for the transaction. */


  /** Miner fee (calculated automatically). */


  /** Transaction note saved locally with the wallet (optional). */


  /** Recipient name saved locally with the wallet (optional). */


  /** Allow funds to be transferred using multiple transactions if necessary (default false). */


  /** For sweep requests, include outputs below this amount when sweeping wallet, account, subaddress, or all unlocked funds. */


  /** For sweep requests, sweep each subaddress individually instead of together if true. */


  /** For sweep requests, key image of the output to sweep. */


  /** Arbitrary data to include in the transaction (optional). */


  /**
   * <p>Generic request to transfer funds from a wallet.</p>
   *
   * <p>Example:</p>
   *
   * <code>
   * let config1 = new MoneroTxConfig({<br>
   * &nbsp;&nbsp; accountIndex: 0,<br>
   * &nbsp;&nbsp; address: "59aZULsUF3YN...",<br>
   * &nbsp;&nbsp; amount: 500000n,<br>
   * &nbsp;&nbsp; priority: MoneroTxPriority.NORMAL,<br>
   * &nbsp;&nbsp; relay: true<br>
   * });
   * </code>
   *
   * @param {Partial<MoneroTxConfig>} [config] - configures the transaction to create (optional)
   * @param {string} [config.address] - single destination address
   * @param {bigint} [config.amount] - single destination amount
   * @param {number} [config.accountIndex] - source account index to transfer funds from
   * @param {number} [config.subaddressIndex] - source subaddress index to transfer funds from
   * @param {number[]} [config.subaddressIndices] - source subaddress indices to transfer funds from
   * @param {boolean} [config.relay] - relay the transaction to peers to commit to the blockchain
   * @param {MoneroTxPriority} [config.priority] - transaction priority (default MoneroTxPriority.NORMAL)
   * @param {MoneroDestination[]} [config.destinations] - addresses and amounts in a multi-destination tx
   * @param {number[]} [config.subtractFeeFrom] - list of destination indices to split the transaction fee
   * @param {string} [config.paymentId] - transaction payment ID
   * @param {bigint} [config.unlockTime] - minimum height or timestamp for the transaction to unlock (default 0)
   * @param {string} [config.note] - transaction note saved locally with the wallet
   * @param {string} [config.recipientName] - recipient name saved locally with the wallet
   * @param {boolean} [config.canSplit] - allow funds to be transferred using multiple transactions
   * @param {bigint} [config.belowAmount] - for sweep requests, include outputs below this amount when sweeping wallet, account, subaddress, or all unlocked funds
   * @param {boolean} [config.sweepEachSubaddress] - for sweep requests, sweep each subaddress individually instead of together if true
   * @param {string} [config.keyImage] - key image to sweep (ignored except in sweepOutput() requests)
   */
  constructor(config) {
    Object.assign(this, config);

    // deserialize bigints
    if (this.amount !== undefined && typeof this.amount !== "bigint")
    this.amount = BigInt(this.amount);
    if (this.fee !== undefined && typeof this.fee !== "bigint") this.fee = BigInt(this.fee);
    if (this.belowAmount !== undefined && typeof this.belowAmount !== "bigint")
    this.belowAmount = BigInt(this.belowAmount);

    // copy destinations
    if (this.destinations) {
      (0, _assert.default)(
        this.address === undefined && this.amount === undefined,
        "Tx configuration may specify destinations or an address/amount but not both"
      );
      this.setDestinations(
        this.destinations.map((destination) => new _MoneroDestination.default(destination))
      );
    }

    // alias 'address' and 'amount' to single destination to support e.g. createTx({address: "..."})
    if (this.address || this.amount) {
      (0, _assert.default)(
        !this.destinations,
        "Tx configuration may specify destinations or an address/amount but not both"
      );
      this.setAddress(this.address);
      this.setAmount(this.amount);
      delete this.address;
      delete this.amount;
    }

    // alias 'subaddressIndex' to subaddress indices
    if (this.subaddressIndex !== undefined) {
      this.setSubaddressIndices([this.subaddressIndex]);
      delete this.subaddressIndex;
    }
  }

  copy() {
    return new MoneroTxConfig(this);
  }

  toJson() {
    let json = Object.assign({}, this); // copy state
    if (this.getDestinations() !== undefined) {
      json.destinations = [];
      for (let destination of this.getDestinations()) json.destinations.push(destination.toJson());
    }

    if (this.getFee()) json.fee = this.getFee().toString();
    if (this.getBelowAmount()) json.belowAmount = this.getBelowAmount().toString();

    if (this.getData() != undefined) {
      json.data = [];
      for (const byte of this.getData()) {
        json.data.push(byte);
      }
    }

    return json;
  }

  /**
   * Set the address of a single-destination configuration.
   *
   * @param {string} address - the address to set for the single destination
   * @return {MoneroTxConfig} this configuration for chaining
   */
  setAddress(address) {
    if (this.destinations !== undefined && this.destinations.length > 1)
    throw new _MoneroError.default(
      "Cannot set address because MoneroTxConfig already has multiple destinations"
    );
    if (this.destinations === undefined || this.destinations.length === 0)
    this.addDestination(new _MoneroDestination.default(address));else
    this.destinations[0].setAddress(address);
    return this;
  }

  /**
   * Get the address of a single-destination configuration.
   *
   * @return {string} the address of the single destination
   */
  getAddress() {
    if (this.destinations === undefined || this.destinations.length !== 1)
    throw new _MoneroError.default(
      "Cannot get address because MoneroTxConfig does not have exactly one destination"
    );
    return this.destinations[0].getAddress();
  }

  /**
   * Set the amount of a single-destination configuration.
   *
   * @param {bigint} amount - the amount to set for the single destination
   * @return {MoneroTxConfig} this configuration for chaining
   */
  setAmount(amount) {
    if (amount !== undefined && typeof this.amount !== "bigint") {
      if (typeof amount === "number")
      throw new _MoneroError.default("Destination amount must be bigint or string");
      try {
        amount = BigInt(amount);
      } catch (err) {
        throw new _MoneroError.default("Invalid destination amount: " + amount);
      }
    }
    if (this.destinations !== undefined && this.destinations.length > 1)
    throw new _MoneroError.default(
      "Cannot set amount because MoneroTxConfig already has multiple destinations"
    );
    if (this.destinations === undefined || this.destinations.length === 0)
    this.addDestination(new _MoneroDestination.default(undefined, amount));else
    this.destinations[0].setAmount(amount);
    return this;
  }

  /**
   * Get the amount of a single-destination configuration.
   *
   * @return {bigint} the amount of the single destination
   */
  getAmount() {
    if (this.destinations === undefined || this.destinations.length !== 1)
    throw new _MoneroError.default(
      "Cannot get amount because MoneroTxConfig does not have exactly one destination"
    );
    return this.destinations[0].getAmount();
  }

  addDestination(
  destinationOrAddress,
  amount)
  {
    if (typeof destinationOrAddress === "string")
    return this.addDestination(new _MoneroDestination.default(destinationOrAddress, amount));
    (0, _assert.default)(destinationOrAddress instanceof _MoneroDestination.default);
    if (this.destinations === undefined) this.destinations = [];
    this.destinations.push(destinationOrAddress);
    return this;
  }

  getDestinations() {
    return this.destinations;
  }

  setDestinations(destinations) {
    if (arguments.length > 1) destinations = Array.from(arguments);
    this.destinations = destinations;
    return this;
  }

  setDestination(destination) {
    return this.setDestinations(destination ? [destination] : undefined);
  }

  getSubtractFeeFrom() {
    return this.subtractFeeFrom;
  }

  setSubtractFeeFrom(destinationIndices) {
    if (arguments.length > 1) destinationIndices = Array.from(arguments);
    this.subtractFeeFrom = destinationIndices;
    return this;
  }

  getPaymentId() {
    return this.paymentId;
  }

  setPaymentId(paymentId) {
    this.paymentId = paymentId;
    return this;
  }

  getPriority() {
    return this.priority;
  }

  setPriority(priority) {
    this.priority = priority;
    return this;
  }

  getFee() {
    return this.fee;
  }

  setFee(fee) {
    this.fee = fee;
    return this;
  }

  getAccountIndex() {
    return this.accountIndex;
  }

  setAccountIndex(accountIndex) {
    this.accountIndex = accountIndex;
    return this;
  }

  setSubaddressIndex(subaddressIndex) {
    this.setSubaddressIndices([subaddressIndex]);
    return this;
  }

  getSubaddressIndices() {
    return this.subaddressIndices;
  }

  setSubaddressIndices(subaddressIndices) {
    if (arguments.length > 1) subaddressIndices = Array.from(arguments);
    this.subaddressIndices = subaddressIndices;
    return this;
  }

  getRelay() {
    return this.relay;
  }

  setRelay(relay) {
    this.relay = relay;
    return this;
  }

  getCanSplit() {
    return this.canSplit;
  }

  setCanSplit(canSplit) {
    this.canSplit = canSplit;
    return this;
  }

  getNote() {
    return this.note;
  }

  setNote(note) {
    this.note = note;
    return this;
  }

  getRecipientName() {
    return this.recipientName;
  }

  setRecipientName(recipientName) {
    this.recipientName = recipientName;
    return this;
  }

  // --------------------------- SPECIFIC TO SWEEP ----------------------------

  getBelowAmount() {
    return this.belowAmount;
  }

  setBelowAmount(belowAmount) {
    this.belowAmount = belowAmount;
    return this;
  }

  getSweepEachSubaddress() {
    return this.sweepEachSubaddress;
  }

  setSweepEachSubaddress(sweepEachSubaddress) {
    this.sweepEachSubaddress = sweepEachSubaddress;
    return this;
  }

  /**
   * Get the key image hex of the output to sweep.
   *
   * return {string} is the key image hex of the output to sweep
   */
  getKeyImage() {
    return this.keyImage;
  }

  /**
   * Set the key image hex of the output to sweep.
   *
   * @param {string} keyImage is the key image hex of the output to sweep
   */
  setKeyImage(keyImage) {
    this.keyImage = keyImage;
    return this;
  }

  /**
   * Get the key image hex of the output to sweep.
   *
   * return {string} is the key image hex of the output to sweep
   */
  getData() {
    return this.data;
  }

  /**
   * Set the arbitrary data to include in the transaction
   *
   * @param {Uint8Array} data data to add to the transaction
   */
  setData(data) {
    this.data = data;
    return this;
  }
}exports.default = MoneroTxConfig;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXNzZXJ0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfTW9uZXJvRGVzdGluYXRpb24iLCJfTW9uZXJvRXJyb3IiLCJNb25lcm9UeENvbmZpZyIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiT2JqZWN0IiwiYXNzaWduIiwiYW1vdW50IiwidW5kZWZpbmVkIiwiQmlnSW50IiwiZmVlIiwiYmVsb3dBbW91bnQiLCJkZXN0aW5hdGlvbnMiLCJhc3NlcnQiLCJhZGRyZXNzIiwic2V0RGVzdGluYXRpb25zIiwibWFwIiwiZGVzdGluYXRpb24iLCJNb25lcm9EZXN0aW5hdGlvbiIsInNldEFkZHJlc3MiLCJzZXRBbW91bnQiLCJzdWJhZGRyZXNzSW5kZXgiLCJzZXRTdWJhZGRyZXNzSW5kaWNlcyIsImNvcHkiLCJ0b0pzb24iLCJqc29uIiwiZ2V0RGVzdGluYXRpb25zIiwicHVzaCIsImdldEZlZSIsInRvU3RyaW5nIiwiZ2V0QmVsb3dBbW91bnQiLCJnZXREYXRhIiwiZGF0YSIsImJ5dGUiLCJsZW5ndGgiLCJNb25lcm9FcnJvciIsImFkZERlc3RpbmF0aW9uIiwiZ2V0QWRkcmVzcyIsImVyciIsImdldEFtb3VudCIsImRlc3RpbmF0aW9uT3JBZGRyZXNzIiwiYXJndW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwic2V0RGVzdGluYXRpb24iLCJnZXRTdWJ0cmFjdEZlZUZyb20iLCJzdWJ0cmFjdEZlZUZyb20iLCJzZXRTdWJ0cmFjdEZlZUZyb20iLCJkZXN0aW5hdGlvbkluZGljZXMiLCJnZXRQYXltZW50SWQiLCJwYXltZW50SWQiLCJzZXRQYXltZW50SWQiLCJnZXRQcmlvcml0eSIsInByaW9yaXR5Iiwic2V0UHJpb3JpdHkiLCJzZXRGZWUiLCJnZXRBY2NvdW50SW5kZXgiLCJhY2NvdW50SW5kZXgiLCJzZXRBY2NvdW50SW5kZXgiLCJzZXRTdWJhZGRyZXNzSW5kZXgiLCJnZXRTdWJhZGRyZXNzSW5kaWNlcyIsInN1YmFkZHJlc3NJbmRpY2VzIiwiZ2V0UmVsYXkiLCJyZWxheSIsInNldFJlbGF5IiwiZ2V0Q2FuU3BsaXQiLCJjYW5TcGxpdCIsInNldENhblNwbGl0IiwiZ2V0Tm90ZSIsIm5vdGUiLCJzZXROb3RlIiwiZ2V0UmVjaXBpZW50TmFtZSIsInJlY2lwaWVudE5hbWUiLCJzZXRSZWNpcGllbnROYW1lIiwic2V0QmVsb3dBbW91bnQiLCJnZXRTd2VlcEVhY2hTdWJhZGRyZXNzIiwic3dlZXBFYWNoU3ViYWRkcmVzcyIsInNldFN3ZWVwRWFjaFN1YmFkZHJlc3MiLCJnZXRLZXlJbWFnZSIsImtleUltYWdlIiwic2V0S2V5SW1hZ2UiLCJzZXREYXRhIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbWFpbi90cy93YWxsZXQvbW9kZWwvTW9uZXJvVHhDb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XG5pbXBvcnQgTW9uZXJvRGVzdGluYXRpb24gZnJvbSBcIi4vTW9uZXJvRGVzdGluYXRpb25cIjtcbmltcG9ydCBNb25lcm9FcnJvciBmcm9tIFwiLi4vLi4vY29tbW9uL01vbmVyb0Vycm9yXCI7XG5pbXBvcnQgTW9uZXJvVHhQcmlvcml0eSBmcm9tIFwiLi9Nb25lcm9UeFByaW9yaXR5XCI7XG5cbi8qKlxuICogQ29uZmlndXJlcyBhIHRyYW5zYWN0aW9uIHRvIHNlbmQsIHN3ZWVwLCBvciBjcmVhdGUgYSBwYXltZW50IFVSSS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9uZXJvVHhDb25maWcge1xuICAvKiogU2luZ2xlIGRlc3RpbmF0aW9uIGFkZHJlc3MgKHJlcXVpcmVkIHVubGVzcyBgZGVzdGluYXRpb25zYCBwcm92aWRlZCkuICovXG4gIGFkZHJlc3M6IHN0cmluZztcblxuICAvKiogU2luZ2xlIGRlc3RpbmF0aW9uIGFtb3VudCAocmVxdWlyZWQgdW5sZXNzIGBkZXN0aW5hdGlvbnMgcHJvdmlkZWQpLiAqL1xuICBhbW91bnQ6IGJpZ2ludDtcblxuICAvKiogU291cmNlIGFjY291bnQgaW5kZXggdG8gdHJhbnNmZXIgZnVuZHMgZnJvbSAocmVxdWlyZWQgdW5sZXNzIHN3ZWVwaW5nIGtleSBpbWFnZSkuICovXG4gIGFjY291bnRJbmRleDogbnVtYmVyO1xuXG4gIC8qKiBTb3VyY2Ugc3ViYWRkcmVzcyBpbmRleCB0byBzZW5kIGZ1bmRzIGZyb20gKGRlZmF1bHQgYWxsKS4gKi9cbiAgc3ViYWRkcmVzc0luZGV4OiBudW1iZXI7XG5cbiAgLyoqIFNvdXJjZSBzdWJhZGRyZXNzZXMgdG8gc2VuZCBmdW5kcyBmcm9tIChkZWZhdWx0IGFsbCkuICovXG4gIHN1YmFkZHJlc3NJbmRpY2VzOiBudW1iZXJbXTtcblxuICAvKiogUmVsYXkgdGhlIHRyYW5zYWN0aW9uIHRvIHBlZXJzIHRvIGNvbW1pdCB0byB0aGUgYmxvY2tjaGFpbiBpZiB0cnVlIChkZWZhdWx0IGZhbHNlKS4gKi9cbiAgcmVsYXk6IGJvb2xlYW47XG5cbiAgLyoqIFRyYW5zYWN0aW9uIHByaW9yaXR5IHRvIGFkanVzdCB0aGUgbWluZXIgZmVlIChkZWZhdWx0IE1vbmVyb1R4UHJpb3JpdHkuTk9STUFMKS4gKi9cbiAgcHJpb3JpdHk6IE1vbmVyb1R4UHJpb3JpdHk7XG5cbiAgLyoqIE11bHRpcGxlIGRlc3RpbmF0aW9ucyB0byBzZW5kIGZ1bmRzIHRvLCBpZiBhcHBsaWNhYmxlLiAqL1xuICBkZXN0aW5hdGlvbnM6IFBhcnRpYWw8TW9uZXJvRGVzdGluYXRpb24+W107XG5cbiAgLyoqIExpc3Qgb2YgZGVzdGluYXRpb24gaW5kaWNlcyB0byBzcGxpdCB0aGUgbWluZXIgZmVlIChvcHRpb25hbCkuICovXG4gIHN1YnRyYWN0RmVlRnJvbTogbnVtYmVyW107XG5cbiAgLyoqIFBheW1lbnQgSUQgZm9yIHRoZSB0cmFuc2FjdGlvbi4gKi9cbiAgcGF5bWVudElkOiBzdHJpbmc7XG5cbiAgLyoqIE1pbmVyIGZlZSAoY2FsY3VsYXRlZCBhdXRvbWF0aWNhbGx5KS4gKi9cbiAgZmVlOiBiaWdpbnQ7XG5cbiAgLyoqIFRyYW5zYWN0aW9uIG5vdGUgc2F2ZWQgbG9jYWxseSB3aXRoIHRoZSB3YWxsZXQgKG9wdGlvbmFsKS4gKi9cbiAgbm90ZTogc3RyaW5nO1xuXG4gIC8qKiBSZWNpcGllbnQgbmFtZSBzYXZlZCBsb2NhbGx5IHdpdGggdGhlIHdhbGxldCAob3B0aW9uYWwpLiAqL1xuICByZWNpcGllbnROYW1lOiBzdHJpbmc7XG5cbiAgLyoqIEFsbG93IGZ1bmRzIHRvIGJlIHRyYW5zZmVycmVkIHVzaW5nIG11bHRpcGxlIHRyYW5zYWN0aW9ucyBpZiBuZWNlc3NhcnkgKGRlZmF1bHQgZmFsc2UpLiAqL1xuICBjYW5TcGxpdDogYm9vbGVhbjtcblxuICAvKiogRm9yIHN3ZWVwIHJlcXVlc3RzLCBpbmNsdWRlIG91dHB1dHMgYmVsb3cgdGhpcyBhbW91bnQgd2hlbiBzd2VlcGluZyB3YWxsZXQsIGFjY291bnQsIHN1YmFkZHJlc3MsIG9yIGFsbCB1bmxvY2tlZCBmdW5kcy4gKi9cbiAgYmVsb3dBbW91bnQ6IGJpZ2ludDtcblxuICAvKiogRm9yIHN3ZWVwIHJlcXVlc3RzLCBzd2VlcCBlYWNoIHN1YmFkZHJlc3MgaW5kaXZpZHVhbGx5IGluc3RlYWQgb2YgdG9nZXRoZXIgaWYgdHJ1ZS4gKi9cbiAgc3dlZXBFYWNoU3ViYWRkcmVzczogYm9vbGVhbjtcblxuICAvKiogRm9yIHN3ZWVwIHJlcXVlc3RzLCBrZXkgaW1hZ2Ugb2YgdGhlIG91dHB1dCB0byBzd2VlcC4gKi9cbiAga2V5SW1hZ2U6IHN0cmluZztcblxuICAvKiogQXJiaXRyYXJ5IGRhdGEgdG8gaW5jbHVkZSBpbiB0aGUgdHJhbnNhY3Rpb24gKG9wdGlvbmFsKS4gKi9cbiAgZGF0YTogVWludDhBcnJheTtcblxuICAvKipcbiAgICogPHA+R2VuZXJpYyByZXF1ZXN0IHRvIHRyYW5zZmVyIGZ1bmRzIGZyb20gYSB3YWxsZXQuPC9wPlxuICAgKlxuICAgKiA8cD5FeGFtcGxlOjwvcD5cbiAgICpcbiAgICogPGNvZGU+XG4gICAqIGxldCBjb25maWcxID0gbmV3IE1vbmVyb1R4Q29uZmlnKHs8YnI+XG4gICAqICZuYnNwOyZuYnNwOyBhY2NvdW50SW5kZXg6IDAsPGJyPlxuICAgKiAmbmJzcDsmbmJzcDsgYWRkcmVzczogXCI1OWFaVUxzVUYzWU4uLi5cIiw8YnI+XG4gICAqICZuYnNwOyZuYnNwOyBhbW91bnQ6IDUwMDAwMG4sPGJyPlxuICAgKiAmbmJzcDsmbmJzcDsgcHJpb3JpdHk6IE1vbmVyb1R4UHJpb3JpdHkuTk9STUFMLDxicj5cbiAgICogJm5ic3A7Jm5ic3A7IHJlbGF5OiB0cnVlPGJyPlxuICAgKiB9KTtcbiAgICogPC9jb2RlPlxuICAgKlxuICAgKiBAcGFyYW0ge1BhcnRpYWw8TW9uZXJvVHhDb25maWc+fSBbY29uZmlnXSAtIGNvbmZpZ3VyZXMgdGhlIHRyYW5zYWN0aW9uIHRvIGNyZWF0ZSAob3B0aW9uYWwpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmFkZHJlc3NdIC0gc2luZ2xlIGRlc3RpbmF0aW9uIGFkZHJlc3NcbiAgICogQHBhcmFtIHtiaWdpbnR9IFtjb25maWcuYW1vdW50XSAtIHNpbmdsZSBkZXN0aW5hdGlvbiBhbW91bnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuYWNjb3VudEluZGV4XSAtIHNvdXJjZSBhY2NvdW50IGluZGV4IHRvIHRyYW5zZmVyIGZ1bmRzIGZyb21cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuc3ViYWRkcmVzc0luZGV4XSAtIHNvdXJjZSBzdWJhZGRyZXNzIGluZGV4IHRvIHRyYW5zZmVyIGZ1bmRzIGZyb21cbiAgICogQHBhcmFtIHtudW1iZXJbXX0gW2NvbmZpZy5zdWJhZGRyZXNzSW5kaWNlc10gLSBzb3VyY2Ugc3ViYWRkcmVzcyBpbmRpY2VzIHRvIHRyYW5zZmVyIGZ1bmRzIGZyb21cbiAgICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLnJlbGF5XSAtIHJlbGF5IHRoZSB0cmFuc2FjdGlvbiB0byBwZWVycyB0byBjb21taXQgdG8gdGhlIGJsb2NrY2hhaW5cbiAgICogQHBhcmFtIHtNb25lcm9UeFByaW9yaXR5fSBbY29uZmlnLnByaW9yaXR5XSAtIHRyYW5zYWN0aW9uIHByaW9yaXR5IChkZWZhdWx0IE1vbmVyb1R4UHJpb3JpdHkuTk9STUFMKVxuICAgKiBAcGFyYW0ge01vbmVyb0Rlc3RpbmF0aW9uW119IFtjb25maWcuZGVzdGluYXRpb25zXSAtIGFkZHJlc3NlcyBhbmQgYW1vdW50cyBpbiBhIG11bHRpLWRlc3RpbmF0aW9uIHR4XG4gICAqIEBwYXJhbSB7bnVtYmVyW119IFtjb25maWcuc3VidHJhY3RGZWVGcm9tXSAtIGxpc3Qgb2YgZGVzdGluYXRpb24gaW5kaWNlcyB0byBzcGxpdCB0aGUgdHJhbnNhY3Rpb24gZmVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLnBheW1lbnRJZF0gLSB0cmFuc2FjdGlvbiBwYXltZW50IElEXG4gICAqIEBwYXJhbSB7YmlnaW50fSBbY29uZmlnLnVubG9ja1RpbWVdIC0gbWluaW11bSBoZWlnaHQgb3IgdGltZXN0YW1wIGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gdW5sb2NrIChkZWZhdWx0IDApXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLm5vdGVdIC0gdHJhbnNhY3Rpb24gbm90ZSBzYXZlZCBsb2NhbGx5IHdpdGggdGhlIHdhbGxldFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy5yZWNpcGllbnROYW1lXSAtIHJlY2lwaWVudCBuYW1lIHNhdmVkIGxvY2FsbHkgd2l0aCB0aGUgd2FsbGV0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbmZpZy5jYW5TcGxpdF0gLSBhbGxvdyBmdW5kcyB0byBiZSB0cmFuc2ZlcnJlZCB1c2luZyBtdWx0aXBsZSB0cmFuc2FjdGlvbnNcbiAgICogQHBhcmFtIHtiaWdpbnR9IFtjb25maWcuYmVsb3dBbW91bnRdIC0gZm9yIHN3ZWVwIHJlcXVlc3RzLCBpbmNsdWRlIG91dHB1dHMgYmVsb3cgdGhpcyBhbW91bnQgd2hlbiBzd2VlcGluZyB3YWxsZXQsIGFjY291bnQsIHN1YmFkZHJlc3MsIG9yIGFsbCB1bmxvY2tlZCBmdW5kc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcuc3dlZXBFYWNoU3ViYWRkcmVzc10gLSBmb3Igc3dlZXAgcmVxdWVzdHMsIHN3ZWVwIGVhY2ggc3ViYWRkcmVzcyBpbmRpdmlkdWFsbHkgaW5zdGVhZCBvZiB0b2dldGhlciBpZiB0cnVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmtleUltYWdlXSAtIGtleSBpbWFnZSB0byBzd2VlcCAoaWdub3JlZCBleGNlcHQgaW4gc3dlZXBPdXRwdXQoKSByZXF1ZXN0cylcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZz86IFBhcnRpYWw8TW9uZXJvVHhDb25maWc+KSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpO1xuXG4gICAgLy8gZGVzZXJpYWxpemUgYmlnaW50c1xuICAgIGlmICh0aGlzLmFtb3VudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLmFtb3VudCAhPT0gXCJiaWdpbnRcIilcbiAgICAgIHRoaXMuYW1vdW50ID0gQmlnSW50KHRoaXMuYW1vdW50KTtcbiAgICBpZiAodGhpcy5mZWUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdGhpcy5mZWUgIT09IFwiYmlnaW50XCIpIHRoaXMuZmVlID0gQmlnSW50KHRoaXMuZmVlKTtcbiAgICBpZiAodGhpcy5iZWxvd0Ftb3VudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLmJlbG93QW1vdW50ICE9PSBcImJpZ2ludFwiKVxuICAgICAgdGhpcy5iZWxvd0Ftb3VudCA9IEJpZ0ludCh0aGlzLmJlbG93QW1vdW50KTtcblxuICAgIC8vIGNvcHkgZGVzdGluYXRpb25zXG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMuYWRkcmVzcyA9PT0gdW5kZWZpbmVkICYmIHRoaXMuYW1vdW50ID09PSB1bmRlZmluZWQsXG4gICAgICAgIFwiVHggY29uZmlndXJhdGlvbiBtYXkgc3BlY2lmeSBkZXN0aW5hdGlvbnMgb3IgYW4gYWRkcmVzcy9hbW91bnQgYnV0IG5vdCBib3RoXCJcbiAgICAgICk7XG4gICAgICB0aGlzLnNldERlc3RpbmF0aW9ucyhcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbnMubWFwKChkZXN0aW5hdGlvbikgPT4gbmV3IE1vbmVyb0Rlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gYWxpYXMgJ2FkZHJlc3MnIGFuZCAnYW1vdW50JyB0byBzaW5nbGUgZGVzdGluYXRpb24gdG8gc3VwcG9ydCBlLmcuIGNyZWF0ZVR4KHthZGRyZXNzOiBcIi4uLlwifSlcbiAgICBpZiAodGhpcy5hZGRyZXNzIHx8IHRoaXMuYW1vdW50KSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgICF0aGlzLmRlc3RpbmF0aW9ucyxcbiAgICAgICAgXCJUeCBjb25maWd1cmF0aW9uIG1heSBzcGVjaWZ5IGRlc3RpbmF0aW9ucyBvciBhbiBhZGRyZXNzL2Ftb3VudCBidXQgbm90IGJvdGhcIlxuICAgICAgKTtcbiAgICAgIHRoaXMuc2V0QWRkcmVzcyh0aGlzLmFkZHJlc3MpO1xuICAgICAgdGhpcy5zZXRBbW91bnQodGhpcy5hbW91bnQpO1xuICAgICAgZGVsZXRlIHRoaXMuYWRkcmVzcztcbiAgICAgIGRlbGV0ZSB0aGlzLmFtb3VudDtcbiAgICB9XG5cbiAgICAvLyBhbGlhcyAnc3ViYWRkcmVzc0luZGV4JyB0byBzdWJhZGRyZXNzIGluZGljZXNcbiAgICBpZiAodGhpcy5zdWJhZGRyZXNzSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRTdWJhZGRyZXNzSW5kaWNlcyhbdGhpcy5zdWJhZGRyZXNzSW5kZXhdKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnN1YmFkZHJlc3NJbmRleDtcbiAgICB9XG4gIH1cblxuICBjb3B5KCk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICByZXR1cm4gbmV3IE1vbmVyb1R4Q29uZmlnKHRoaXMpO1xuICB9XG5cbiAgdG9Kc29uKCk6IGFueSB7XG4gICAgbGV0IGpzb246IGFueSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMpOyAvLyBjb3B5IHN0YXRlXG4gICAgaWYgKHRoaXMuZ2V0RGVzdGluYXRpb25zKCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAganNvbi5kZXN0aW5hdGlvbnMgPSBbXTtcbiAgICAgIGZvciAobGV0IGRlc3RpbmF0aW9uIG9mIHRoaXMuZ2V0RGVzdGluYXRpb25zKCkpIGpzb24uZGVzdGluYXRpb25zLnB1c2goZGVzdGluYXRpb24udG9Kc29uKCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmdldEZlZSgpKSBqc29uLmZlZSA9IHRoaXMuZ2V0RmVlKCkudG9TdHJpbmcoKTtcbiAgICBpZiAodGhpcy5nZXRCZWxvd0Ftb3VudCgpKSBqc29uLmJlbG93QW1vdW50ID0gdGhpcy5nZXRCZWxvd0Ftb3VudCgpLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy5nZXREYXRhKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBqc29uLmRhdGEgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgYnl0ZSBvZiB0aGlzLmdldERhdGEoKSkge1xuICAgICAgICBqc29uLmRhdGEucHVzaChieXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFkZHJlc3Mgb2YgYSBzaW5nbGUtZGVzdGluYXRpb24gY29uZmlndXJhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3MgLSB0aGUgYWRkcmVzcyB0byBzZXQgZm9yIHRoZSBzaW5nbGUgZGVzdGluYXRpb25cbiAgICogQHJldHVybiB7TW9uZXJvVHhDb25maWd9IHRoaXMgY29uZmlndXJhdGlvbiBmb3IgY2hhaW5pbmdcbiAgICovXG4gIHNldEFkZHJlc3MoYWRkcmVzczogc3RyaW5nKTogTW9uZXJvVHhDb25maWcge1xuICAgIGlmICh0aGlzLmRlc3RpbmF0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZGVzdGluYXRpb25zLmxlbmd0aCA+IDEpXG4gICAgICB0aHJvdyBuZXcgTW9uZXJvRXJyb3IoXG4gICAgICAgIFwiQ2Fubm90IHNldCBhZGRyZXNzIGJlY2F1c2UgTW9uZXJvVHhDb25maWcgYWxyZWFkeSBoYXMgbXVsdGlwbGUgZGVzdGluYXRpb25zXCJcbiAgICAgICk7XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zID09PSB1bmRlZmluZWQgfHwgdGhpcy5kZXN0aW5hdGlvbnMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5hZGREZXN0aW5hdGlvbihuZXcgTW9uZXJvRGVzdGluYXRpb24oYWRkcmVzcykpO1xuICAgIGVsc2UgKHRoaXMuZGVzdGluYXRpb25zWzBdIGFzIE1vbmVyb0Rlc3RpbmF0aW9uKS5zZXRBZGRyZXNzKGFkZHJlc3MpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYWRkcmVzcyBvZiBhIHNpbmdsZS1kZXN0aW5hdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBhZGRyZXNzIG9mIHRoZSBzaW5nbGUgZGVzdGluYXRpb25cbiAgICovXG4gIGdldEFkZHJlc3MoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5kZXN0aW5hdGlvbnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmRlc3RpbmF0aW9ucy5sZW5ndGggIT09IDEpXG4gICAgICB0aHJvdyBuZXcgTW9uZXJvRXJyb3IoXG4gICAgICAgIFwiQ2Fubm90IGdldCBhZGRyZXNzIGJlY2F1c2UgTW9uZXJvVHhDb25maWcgZG9lcyBub3QgaGF2ZSBleGFjdGx5IG9uZSBkZXN0aW5hdGlvblwiXG4gICAgICApO1xuICAgIHJldHVybiAodGhpcy5kZXN0aW5hdGlvbnNbMF0gYXMgTW9uZXJvRGVzdGluYXRpb24pLmdldEFkZHJlc3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFtb3VudCBvZiBhIHNpbmdsZS1kZXN0aW5hdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge2JpZ2ludH0gYW1vdW50IC0gdGhlIGFtb3VudCB0byBzZXQgZm9yIHRoZSBzaW5nbGUgZGVzdGluYXRpb25cbiAgICogQHJldHVybiB7TW9uZXJvVHhDb25maWd9IHRoaXMgY29uZmlndXJhdGlvbiBmb3IgY2hhaW5pbmdcbiAgICovXG4gIHNldEFtb3VudChhbW91bnQ6IGJpZ2ludCk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICBpZiAoYW1vdW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRoaXMuYW1vdW50ICE9PSBcImJpZ2ludFwiKSB7XG4gICAgICBpZiAodHlwZW9mIGFtb3VudCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgdGhyb3cgbmV3IE1vbmVyb0Vycm9yKFwiRGVzdGluYXRpb24gYW1vdW50IG11c3QgYmUgYmlnaW50IG9yIHN0cmluZ1wiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFtb3VudCA9IEJpZ0ludChhbW91bnQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IG5ldyBNb25lcm9FcnJvcihcIkludmFsaWQgZGVzdGluYXRpb24gYW1vdW50OiBcIiArIGFtb3VudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRlc3RpbmF0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZGVzdGluYXRpb25zLmxlbmd0aCA+IDEpXG4gICAgICB0aHJvdyBuZXcgTW9uZXJvRXJyb3IoXG4gICAgICAgIFwiQ2Fubm90IHNldCBhbW91bnQgYmVjYXVzZSBNb25lcm9UeENvbmZpZyBhbHJlYWR5IGhhcyBtdWx0aXBsZSBkZXN0aW5hdGlvbnNcIlxuICAgICAgKTtcbiAgICBpZiAodGhpcy5kZXN0aW5hdGlvbnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmRlc3RpbmF0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLmFkZERlc3RpbmF0aW9uKG5ldyBNb25lcm9EZXN0aW5hdGlvbih1bmRlZmluZWQsIGFtb3VudCkpO1xuICAgIGVsc2UgKHRoaXMuZGVzdGluYXRpb25zWzBdIGFzIE1vbmVyb0Rlc3RpbmF0aW9uKS5zZXRBbW91bnQoYW1vdW50KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFtb3VudCBvZiBhIHNpbmdsZS1kZXN0aW5hdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtiaWdpbnR9IHRoZSBhbW91bnQgb2YgdGhlIHNpbmdsZSBkZXN0aW5hdGlvblxuICAgKi9cbiAgZ2V0QW1vdW50KCk6IGJpZ2ludCB7XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zID09PSB1bmRlZmluZWQgfHwgdGhpcy5kZXN0aW5hdGlvbnMubGVuZ3RoICE9PSAxKVxuICAgICAgdGhyb3cgbmV3IE1vbmVyb0Vycm9yKFxuICAgICAgICBcIkNhbm5vdCBnZXQgYW1vdW50IGJlY2F1c2UgTW9uZXJvVHhDb25maWcgZG9lcyBub3QgaGF2ZSBleGFjdGx5IG9uZSBkZXN0aW5hdGlvblwiXG4gICAgICApO1xuICAgIHJldHVybiAodGhpcy5kZXN0aW5hdGlvbnNbMF0gYXMgTW9uZXJvRGVzdGluYXRpb24pLmdldEFtb3VudCgpO1xuICB9XG5cbiAgYWRkRGVzdGluYXRpb24oXG4gICAgZGVzdGluYXRpb25PckFkZHJlc3M6IE1vbmVyb0Rlc3RpbmF0aW9uIHwgc3RyaW5nLFxuICAgIGFtb3VudD86IGJpZ2ludFxuICApOiBNb25lcm9UeENvbmZpZyB7XG4gICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yQWRkcmVzcyA9PT0gXCJzdHJpbmdcIilcbiAgICAgIHJldHVybiB0aGlzLmFkZERlc3RpbmF0aW9uKG5ldyBNb25lcm9EZXN0aW5hdGlvbihkZXN0aW5hdGlvbk9yQWRkcmVzcywgYW1vdW50KSk7XG4gICAgYXNzZXJ0KGRlc3RpbmF0aW9uT3JBZGRyZXNzIGluc3RhbmNlb2YgTW9uZXJvRGVzdGluYXRpb24pO1xuICAgIGlmICh0aGlzLmRlc3RpbmF0aW9ucyA9PT0gdW5kZWZpbmVkKSB0aGlzLmRlc3RpbmF0aW9ucyA9IFtdO1xuICAgIHRoaXMuZGVzdGluYXRpb25zLnB1c2goZGVzdGluYXRpb25PckFkZHJlc3MpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0RGVzdGluYXRpb25zKCk6IE1vbmVyb0Rlc3RpbmF0aW9uW10ge1xuICAgIHJldHVybiB0aGlzLmRlc3RpbmF0aW9ucyBhcyBNb25lcm9EZXN0aW5hdGlvbltdO1xuICB9XG5cbiAgc2V0RGVzdGluYXRpb25zKGRlc3RpbmF0aW9uczogTW9uZXJvRGVzdGluYXRpb25bXSk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIGRlc3RpbmF0aW9ucyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcbiAgICB0aGlzLmRlc3RpbmF0aW9ucyA9IGRlc3RpbmF0aW9ucztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldERlc3RpbmF0aW9uKGRlc3RpbmF0aW9uOiBNb25lcm9EZXN0aW5hdGlvbik6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICByZXR1cm4gdGhpcy5zZXREZXN0aW5hdGlvbnMoZGVzdGluYXRpb24gPyBbZGVzdGluYXRpb25dIDogdW5kZWZpbmVkKTtcbiAgfVxuXG4gIGdldFN1YnRyYWN0RmVlRnJvbSgpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuc3VidHJhY3RGZWVGcm9tO1xuICB9XG5cbiAgc2V0U3VidHJhY3RGZWVGcm9tKGRlc3RpbmF0aW9uSW5kaWNlczogbnVtYmVyW10pOiBNb25lcm9UeENvbmZpZyB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBkZXN0aW5hdGlvbkluZGljZXMgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgdGhpcy5zdWJ0cmFjdEZlZUZyb20gPSBkZXN0aW5hdGlvbkluZGljZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRQYXltZW50SWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5wYXltZW50SWQ7XG4gIH1cblxuICBzZXRQYXltZW50SWQocGF5bWVudElkOiBzdHJpbmcpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5wYXltZW50SWQgPSBwYXltZW50SWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRQcmlvcml0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnByaW9yaXR5O1xuICB9XG5cbiAgc2V0UHJpb3JpdHkocHJpb3JpdHk6IG51bWJlcik6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRGZWUoKTogYmlnaW50IHtcbiAgICByZXR1cm4gdGhpcy5mZWU7XG4gIH1cblxuICBzZXRGZWUoZmVlOiBiaWdpbnQpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5mZWUgPSBmZWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRBY2NvdW50SW5kZXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50SW5kZXg7XG4gIH1cblxuICBzZXRBY2NvdW50SW5kZXgoYWNjb3VudEluZGV4OiBudW1iZXIpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5hY2NvdW50SW5kZXggPSBhY2NvdW50SW5kZXg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRTdWJhZGRyZXNzSW5kZXgoc3ViYWRkcmVzc0luZGV4OiBudW1iZXIpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5zZXRTdWJhZGRyZXNzSW5kaWNlcyhbc3ViYWRkcmVzc0luZGV4XSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRTdWJhZGRyZXNzSW5kaWNlcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuc3ViYWRkcmVzc0luZGljZXM7XG4gIH1cblxuICBzZXRTdWJhZGRyZXNzSW5kaWNlcyhzdWJhZGRyZXNzSW5kaWNlczogbnVtYmVyW10pOiBNb25lcm9UeENvbmZpZyB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBzdWJhZGRyZXNzSW5kaWNlcyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcbiAgICB0aGlzLnN1YmFkZHJlc3NJbmRpY2VzID0gc3ViYWRkcmVzc0luZGljZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRSZWxheSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yZWxheTtcbiAgfVxuXG4gIHNldFJlbGF5KHJlbGF5OiBib29sZWFuKTogTW9uZXJvVHhDb25maWcge1xuICAgIHRoaXMucmVsYXkgPSByZWxheTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldENhblNwbGl0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNhblNwbGl0O1xuICB9XG5cbiAgc2V0Q2FuU3BsaXQoY2FuU3BsaXQ6IGJvb2xlYW4pOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5jYW5TcGxpdCA9IGNhblNwbGl0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0Tm90ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm5vdGU7XG4gIH1cblxuICBzZXROb3RlKG5vdGU6IHN0cmluZyk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICB0aGlzLm5vdGUgPSBub3RlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0UmVjaXBpZW50TmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnJlY2lwaWVudE5hbWU7XG4gIH1cblxuICBzZXRSZWNpcGllbnROYW1lKHJlY2lwaWVudE5hbWU6IHN0cmluZyk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICB0aGlzLnJlY2lwaWVudE5hbWUgPSByZWNpcGllbnROYW1lO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFNQRUNJRklDIFRPIFNXRUVQIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBnZXRCZWxvd0Ftb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5iZWxvd0Ftb3VudDtcbiAgfVxuXG4gIHNldEJlbG93QW1vdW50KGJlbG93QW1vdW50KSB7XG4gICAgdGhpcy5iZWxvd0Ftb3VudCA9IGJlbG93QW1vdW50O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0U3dlZXBFYWNoU3ViYWRkcmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5zd2VlcEVhY2hTdWJhZGRyZXNzO1xuICB9XG5cbiAgc2V0U3dlZXBFYWNoU3ViYWRkcmVzcyhzd2VlcEVhY2hTdWJhZGRyZXNzKSB7XG4gICAgdGhpcy5zd2VlcEVhY2hTdWJhZGRyZXNzID0gc3dlZXBFYWNoU3ViYWRkcmVzcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGtleSBpbWFnZSBoZXggb2YgdGhlIG91dHB1dCB0byBzd2VlcC5cbiAgICpcbiAgICogcmV0dXJuIHtzdHJpbmd9IGlzIHRoZSBrZXkgaW1hZ2UgaGV4IG9mIHRoZSBvdXRwdXQgdG8gc3dlZXBcbiAgICovXG4gIGdldEtleUltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmtleUltYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUga2V5IGltYWdlIGhleCBvZiB0aGUgb3V0cHV0IHRvIHN3ZWVwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5SW1hZ2UgaXMgdGhlIGtleSBpbWFnZSBoZXggb2YgdGhlIG91dHB1dCB0byBzd2VlcFxuICAgKi9cbiAgc2V0S2V5SW1hZ2Uoa2V5SW1hZ2UpIHtcbiAgICB0aGlzLmtleUltYWdlID0ga2V5SW1hZ2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBrZXkgaW1hZ2UgaGV4IG9mIHRoZSBvdXRwdXQgdG8gc3dlZXAuXG4gICAqXG4gICAqIHJldHVybiB7c3RyaW5nfSBpcyB0aGUga2V5IGltYWdlIGhleCBvZiB0aGUgb3V0cHV0IHRvIHN3ZWVwXG4gICAqL1xuICBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhcmJpdHJhcnkgZGF0YSB0byBpbmNsdWRlIGluIHRoZSB0cmFuc2FjdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGRhdGEgZGF0YSB0byBhZGQgdG8gdGhlIHRyYW5zYWN0aW9uXG4gICAqL1xuICBzZXREYXRhKGRhdGE6IFVpbnQ4QXJyYXkpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJ5TEFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxrQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDZSxNQUFNRyxjQUFjLENBQUM7RUFDbEM7OztFQUdBOzs7RUFHQTs7O0VBR0E7OztFQUdBOzs7RUFHQTs7O0VBR0E7OztFQUdBOzs7RUFHQTs7O0VBR0E7OztFQUdBOzs7RUFHQTs7O0VBR0E7OztFQUdBOzs7RUFHQTs7O0VBR0E7OztFQUdBOzs7RUFHQTs7O0VBR0E7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBQ0MsTUFBZ0MsRUFBRTtJQUM1Q0MsTUFBTSxDQUFDQyxNQUFNLENBQUMsSUFBSSxFQUFFRixNQUFNLENBQUM7O0lBRTNCO0lBQ0EsSUFBSSxJQUFJLENBQUNHLE1BQU0sS0FBS0MsU0FBUyxJQUFJLE9BQU8sSUFBSSxDQUFDRCxNQUFNLEtBQUssUUFBUTtJQUM5RCxJQUFJLENBQUNBLE1BQU0sR0FBR0UsTUFBTSxDQUFDLElBQUksQ0FBQ0YsTUFBTSxDQUFDO0lBQ25DLElBQUksSUFBSSxDQUFDRyxHQUFHLEtBQUtGLFNBQVMsSUFBSSxPQUFPLElBQUksQ0FBQ0UsR0FBRyxLQUFLLFFBQVEsRUFBRSxJQUFJLENBQUNBLEdBQUcsR0FBR0QsTUFBTSxDQUFDLElBQUksQ0FBQ0MsR0FBRyxDQUFDO0lBQ3ZGLElBQUksSUFBSSxDQUFDQyxXQUFXLEtBQUtILFNBQVMsSUFBSSxPQUFPLElBQUksQ0FBQ0csV0FBVyxLQUFLLFFBQVE7SUFDeEUsSUFBSSxDQUFDQSxXQUFXLEdBQUdGLE1BQU0sQ0FBQyxJQUFJLENBQUNFLFdBQVcsQ0FBQzs7SUFFN0M7SUFDQSxJQUFJLElBQUksQ0FBQ0MsWUFBWSxFQUFFO01BQ3JCLElBQUFDLGVBQU07UUFDSixJQUFJLENBQUNDLE9BQU8sS0FBS04sU0FBUyxJQUFJLElBQUksQ0FBQ0QsTUFBTSxLQUFLQyxTQUFTO1FBQ3ZEO01BQ0YsQ0FBQztNQUNELElBQUksQ0FBQ08sZUFBZTtRQUNsQixJQUFJLENBQUNILFlBQVksQ0FBQ0ksR0FBRyxDQUFDLENBQUNDLFdBQVcsS0FBSyxJQUFJQywwQkFBaUIsQ0FBQ0QsV0FBVyxDQUFDO01BQzNFLENBQUM7SUFDSDs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDSCxPQUFPLElBQUksSUFBSSxDQUFDUCxNQUFNLEVBQUU7TUFDL0IsSUFBQU0sZUFBTTtRQUNKLENBQUMsSUFBSSxDQUFDRCxZQUFZO1FBQ2xCO01BQ0YsQ0FBQztNQUNELElBQUksQ0FBQ08sVUFBVSxDQUFDLElBQUksQ0FBQ0wsT0FBTyxDQUFDO01BQzdCLElBQUksQ0FBQ00sU0FBUyxDQUFDLElBQUksQ0FBQ2IsTUFBTSxDQUFDO01BQzNCLE9BQU8sSUFBSSxDQUFDTyxPQUFPO01BQ25CLE9BQU8sSUFBSSxDQUFDUCxNQUFNO0lBQ3BCOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUNjLGVBQWUsS0FBS2IsU0FBUyxFQUFFO01BQ3RDLElBQUksQ0FBQ2Msb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUNELGVBQWUsQ0FBQyxDQUFDO01BQ2pELE9BQU8sSUFBSSxDQUFDQSxlQUFlO0lBQzdCO0VBQ0Y7O0VBRUFFLElBQUlBLENBQUEsRUFBbUI7SUFDckIsT0FBTyxJQUFJckIsY0FBYyxDQUFDLElBQUksQ0FBQztFQUNqQzs7RUFFQXNCLE1BQU1BLENBQUEsRUFBUTtJQUNaLElBQUlDLElBQVMsR0FBR3BCLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDekMsSUFBSSxJQUFJLENBQUNvQixlQUFlLENBQUMsQ0FBQyxLQUFLbEIsU0FBUyxFQUFFO01BQ3hDaUIsSUFBSSxDQUFDYixZQUFZLEdBQUcsRUFBRTtNQUN0QixLQUFLLElBQUlLLFdBQVcsSUFBSSxJQUFJLENBQUNTLGVBQWUsQ0FBQyxDQUFDLEVBQUVELElBQUksQ0FBQ2IsWUFBWSxDQUFDZSxJQUFJLENBQUNWLFdBQVcsQ0FBQ08sTUFBTSxDQUFDLENBQUMsQ0FBQztJQUM5Rjs7SUFFQSxJQUFJLElBQUksQ0FBQ0ksTUFBTSxDQUFDLENBQUMsRUFBRUgsSUFBSSxDQUFDZixHQUFHLEdBQUcsSUFBSSxDQUFDa0IsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7SUFDdEQsSUFBSSxJQUFJLENBQUNDLGNBQWMsQ0FBQyxDQUFDLEVBQUVMLElBQUksQ0FBQ2QsV0FBVyxHQUFHLElBQUksQ0FBQ21CLGNBQWMsQ0FBQyxDQUFDLENBQUNELFFBQVEsQ0FBQyxDQUFDOztJQUU5RSxJQUFJLElBQUksQ0FBQ0UsT0FBTyxDQUFDLENBQUMsSUFBSXZCLFNBQVMsRUFBRTtNQUMvQmlCLElBQUksQ0FBQ08sSUFBSSxHQUFHLEVBQUU7TUFDZCxLQUFLLE1BQU1DLElBQUksSUFBSSxJQUFJLENBQUNGLE9BQU8sQ0FBQyxDQUFDLEVBQUU7UUFDakNOLElBQUksQ0FBQ08sSUFBSSxDQUFDTCxJQUFJLENBQUNNLElBQUksQ0FBQztNQUN0QjtJQUNGOztJQUVBLE9BQU9SLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRU4sVUFBVUEsQ0FBQ0wsT0FBZSxFQUFrQjtJQUMxQyxJQUFJLElBQUksQ0FBQ0YsWUFBWSxLQUFLSixTQUFTLElBQUksSUFBSSxDQUFDSSxZQUFZLENBQUNzQixNQUFNLEdBQUcsQ0FBQztJQUNqRSxNQUFNLElBQUlDLG9CQUFXO01BQ25CO0lBQ0YsQ0FBQztJQUNILElBQUksSUFBSSxDQUFDdkIsWUFBWSxLQUFLSixTQUFTLElBQUksSUFBSSxDQUFDSSxZQUFZLENBQUNzQixNQUFNLEtBQUssQ0FBQztJQUNuRSxJQUFJLENBQUNFLGNBQWMsQ0FBQyxJQUFJbEIsMEJBQWlCLENBQUNKLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDaEQsSUFBSSxDQUFDRixZQUFZLENBQUMsQ0FBQyxDQUFDLENBQXVCTyxVQUFVLENBQUNMLE9BQU8sQ0FBQztJQUNwRSxPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0V1QixVQUFVQSxDQUFBLEVBQVc7SUFDbkIsSUFBSSxJQUFJLENBQUN6QixZQUFZLEtBQUtKLFNBQVMsSUFBSSxJQUFJLENBQUNJLFlBQVksQ0FBQ3NCLE1BQU0sS0FBSyxDQUFDO0lBQ25FLE1BQU0sSUFBSUMsb0JBQVc7TUFDbkI7SUFDRixDQUFDO0lBQ0gsT0FBUSxJQUFJLENBQUN2QixZQUFZLENBQUMsQ0FBQyxDQUFDLENBQXVCeUIsVUFBVSxDQUFDLENBQUM7RUFDakU7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VqQixTQUFTQSxDQUFDYixNQUFjLEVBQWtCO0lBQ3hDLElBQUlBLE1BQU0sS0FBS0MsU0FBUyxJQUFJLE9BQU8sSUFBSSxDQUFDRCxNQUFNLEtBQUssUUFBUSxFQUFFO01BQzNELElBQUksT0FBT0EsTUFBTSxLQUFLLFFBQVE7TUFDNUIsTUFBTSxJQUFJNEIsb0JBQVcsQ0FBQyw2Q0FBNkMsQ0FBQztNQUN0RSxJQUFJO1FBQ0Y1QixNQUFNLEdBQUdFLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDO01BQ3pCLENBQUMsQ0FBQyxPQUFPK0IsR0FBRyxFQUFFO1FBQ1osTUFBTSxJQUFJSCxvQkFBVyxDQUFDLDhCQUE4QixHQUFHNUIsTUFBTSxDQUFDO01BQ2hFO0lBQ0Y7SUFDQSxJQUFJLElBQUksQ0FBQ0ssWUFBWSxLQUFLSixTQUFTLElBQUksSUFBSSxDQUFDSSxZQUFZLENBQUNzQixNQUFNLEdBQUcsQ0FBQztJQUNqRSxNQUFNLElBQUlDLG9CQUFXO01BQ25CO0lBQ0YsQ0FBQztJQUNILElBQUksSUFBSSxDQUFDdkIsWUFBWSxLQUFLSixTQUFTLElBQUksSUFBSSxDQUFDSSxZQUFZLENBQUNzQixNQUFNLEtBQUssQ0FBQztJQUNuRSxJQUFJLENBQUNFLGNBQWMsQ0FBQyxJQUFJbEIsMEJBQWlCLENBQUNWLFNBQVMsRUFBRUQsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUMxRCxJQUFJLENBQUNLLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBdUJRLFNBQVMsQ0FBQ2IsTUFBTSxDQUFDO0lBQ2xFLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRWdDLFNBQVNBLENBQUEsRUFBVztJQUNsQixJQUFJLElBQUksQ0FBQzNCLFlBQVksS0FBS0osU0FBUyxJQUFJLElBQUksQ0FBQ0ksWUFBWSxDQUFDc0IsTUFBTSxLQUFLLENBQUM7SUFDbkUsTUFBTSxJQUFJQyxvQkFBVztNQUNuQjtJQUNGLENBQUM7SUFDSCxPQUFRLElBQUksQ0FBQ3ZCLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBdUIyQixTQUFTLENBQUMsQ0FBQztFQUNoRTs7RUFFQUgsY0FBY0E7RUFDWkksb0JBQWdEO0VBQ2hEakMsTUFBZTtFQUNDO0lBQ2hCLElBQUksT0FBT2lDLG9CQUFvQixLQUFLLFFBQVE7SUFDMUMsT0FBTyxJQUFJLENBQUNKLGNBQWMsQ0FBQyxJQUFJbEIsMEJBQWlCLENBQUNzQixvQkFBb0IsRUFBRWpDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pGLElBQUFNLGVBQU0sRUFBQzJCLG9CQUFvQixZQUFZdEIsMEJBQWlCLENBQUM7SUFDekQsSUFBSSxJQUFJLENBQUNOLFlBQVksS0FBS0osU0FBUyxFQUFFLElBQUksQ0FBQ0ksWUFBWSxHQUFHLEVBQUU7SUFDM0QsSUFBSSxDQUFDQSxZQUFZLENBQUNlLElBQUksQ0FBQ2Esb0JBQW9CLENBQUM7SUFDNUMsT0FBTyxJQUFJO0VBQ2I7O0VBRUFkLGVBQWVBLENBQUEsRUFBd0I7SUFDckMsT0FBTyxJQUFJLENBQUNkLFlBQVk7RUFDMUI7O0VBRUFHLGVBQWVBLENBQUNILFlBQWlDLEVBQWtCO0lBQ2pFLElBQUk2QixTQUFTLENBQUNQLE1BQU0sR0FBRyxDQUFDLEVBQUV0QixZQUFZLEdBQUc4QixLQUFLLENBQUNDLElBQUksQ0FBQ0YsU0FBUyxDQUFDO0lBQzlELElBQUksQ0FBQzdCLFlBQVksR0FBR0EsWUFBWTtJQUNoQyxPQUFPLElBQUk7RUFDYjs7RUFFQWdDLGNBQWNBLENBQUMzQixXQUE4QixFQUFrQjtJQUM3RCxPQUFPLElBQUksQ0FBQ0YsZUFBZSxDQUFDRSxXQUFXLEdBQUcsQ0FBQ0EsV0FBVyxDQUFDLEdBQUdULFNBQVMsQ0FBQztFQUN0RTs7RUFFQXFDLGtCQUFrQkEsQ0FBQSxFQUFhO0lBQzdCLE9BQU8sSUFBSSxDQUFDQyxlQUFlO0VBQzdCOztFQUVBQyxrQkFBa0JBLENBQUNDLGtCQUE0QixFQUFrQjtJQUMvRCxJQUFJUCxTQUFTLENBQUNQLE1BQU0sR0FBRyxDQUFDLEVBQUVjLGtCQUFrQixHQUFHTixLQUFLLENBQUNDLElBQUksQ0FBQ0YsU0FBUyxDQUFDO0lBQ3BFLElBQUksQ0FBQ0ssZUFBZSxHQUFHRSxrQkFBa0I7SUFDekMsT0FBTyxJQUFJO0VBQ2I7O0VBRUFDLFlBQVlBLENBQUEsRUFBVztJQUNyQixPQUFPLElBQUksQ0FBQ0MsU0FBUztFQUN2Qjs7RUFFQUMsWUFBWUEsQ0FBQ0QsU0FBaUIsRUFBa0I7SUFDOUMsSUFBSSxDQUFDQSxTQUFTLEdBQUdBLFNBQVM7SUFDMUIsT0FBTyxJQUFJO0VBQ2I7O0VBRUFFLFdBQVdBLENBQUEsRUFBVztJQUNwQixPQUFPLElBQUksQ0FBQ0MsUUFBUTtFQUN0Qjs7RUFFQUMsV0FBV0EsQ0FBQ0QsUUFBZ0IsRUFBa0I7SUFDNUMsSUFBSSxDQUFDQSxRQUFRLEdBQUdBLFFBQVE7SUFDeEIsT0FBTyxJQUFJO0VBQ2I7O0VBRUF6QixNQUFNQSxDQUFBLEVBQVc7SUFDZixPQUFPLElBQUksQ0FBQ2xCLEdBQUc7RUFDakI7O0VBRUE2QyxNQUFNQSxDQUFDN0MsR0FBVyxFQUFrQjtJQUNsQyxJQUFJLENBQUNBLEdBQUcsR0FBR0EsR0FBRztJQUNkLE9BQU8sSUFBSTtFQUNiOztFQUVBOEMsZUFBZUEsQ0FBQSxFQUFXO0lBQ3hCLE9BQU8sSUFBSSxDQUFDQyxZQUFZO0VBQzFCOztFQUVBQyxlQUFlQSxDQUFDRCxZQUFvQixFQUFrQjtJQUNwRCxJQUFJLENBQUNBLFlBQVksR0FBR0EsWUFBWTtJQUNoQyxPQUFPLElBQUk7RUFDYjs7RUFFQUUsa0JBQWtCQSxDQUFDdEMsZUFBdUIsRUFBa0I7SUFDMUQsSUFBSSxDQUFDQyxvQkFBb0IsQ0FBQyxDQUFDRCxlQUFlLENBQUMsQ0FBQztJQUM1QyxPQUFPLElBQUk7RUFDYjs7RUFFQXVDLG9CQUFvQkEsQ0FBQSxFQUFhO0lBQy9CLE9BQU8sSUFBSSxDQUFDQyxpQkFBaUI7RUFDL0I7O0VBRUF2QyxvQkFBb0JBLENBQUN1QyxpQkFBMkIsRUFBa0I7SUFDaEUsSUFBSXBCLFNBQVMsQ0FBQ1AsTUFBTSxHQUFHLENBQUMsRUFBRTJCLGlCQUFpQixHQUFHbkIsS0FBSyxDQUFDQyxJQUFJLENBQUNGLFNBQVMsQ0FBQztJQUNuRSxJQUFJLENBQUNvQixpQkFBaUIsR0FBR0EsaUJBQWlCO0lBQzFDLE9BQU8sSUFBSTtFQUNiOztFQUVBQyxRQUFRQSxDQUFBLEVBQVk7SUFDbEIsT0FBTyxJQUFJLENBQUNDLEtBQUs7RUFDbkI7O0VBRUFDLFFBQVFBLENBQUNELEtBQWMsRUFBa0I7SUFDdkMsSUFBSSxDQUFDQSxLQUFLLEdBQUdBLEtBQUs7SUFDbEIsT0FBTyxJQUFJO0VBQ2I7O0VBRUFFLFdBQVdBLENBQUEsRUFBWTtJQUNyQixPQUFPLElBQUksQ0FBQ0MsUUFBUTtFQUN0Qjs7RUFFQUMsV0FBV0EsQ0FBQ0QsUUFBaUIsRUFBa0I7SUFDN0MsSUFBSSxDQUFDQSxRQUFRLEdBQUdBLFFBQVE7SUFDeEIsT0FBTyxJQUFJO0VBQ2I7O0VBRUFFLE9BQU9BLENBQUEsRUFBVztJQUNoQixPQUFPLElBQUksQ0FBQ0MsSUFBSTtFQUNsQjs7RUFFQUMsT0FBT0EsQ0FBQ0QsSUFBWSxFQUFrQjtJQUNwQyxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSTtJQUNoQixPQUFPLElBQUk7RUFDYjs7RUFFQUUsZ0JBQWdCQSxDQUFBLEVBQVc7SUFDekIsT0FBTyxJQUFJLENBQUNDLGFBQWE7RUFDM0I7O0VBRUFDLGdCQUFnQkEsQ0FBQ0QsYUFBcUIsRUFBa0I7SUFDdEQsSUFBSSxDQUFDQSxhQUFhLEdBQUdBLGFBQWE7SUFDbEMsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7O0VBRUExQyxjQUFjQSxDQUFBLEVBQUc7SUFDZixPQUFPLElBQUksQ0FBQ25CLFdBQVc7RUFDekI7O0VBRUErRCxjQUFjQSxDQUFDL0QsV0FBVyxFQUFFO0lBQzFCLElBQUksQ0FBQ0EsV0FBVyxHQUFHQSxXQUFXO0lBQzlCLE9BQU8sSUFBSTtFQUNiOztFQUVBZ0Usc0JBQXNCQSxDQUFBLEVBQUc7SUFDdkIsT0FBTyxJQUFJLENBQUNDLG1CQUFtQjtFQUNqQzs7RUFFQUMsc0JBQXNCQSxDQUFDRCxtQkFBbUIsRUFBRTtJQUMxQyxJQUFJLENBQUNBLG1CQUFtQixHQUFHQSxtQkFBbUI7SUFDOUMsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFRSxXQUFXQSxDQUFBLEVBQUc7SUFDWixPQUFPLElBQUksQ0FBQ0MsUUFBUTtFQUN0Qjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUNELFFBQVEsRUFBRTtJQUNwQixJQUFJLENBQUNBLFFBQVEsR0FBR0EsUUFBUTtJQUN4QixPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VoRCxPQUFPQSxDQUFBLEVBQUc7SUFDUixPQUFPLElBQUksQ0FBQ0MsSUFBSTtFQUNsQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VpRCxPQUFPQSxDQUFDakQsSUFBZ0IsRUFBRTtJQUN4QixJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSTtJQUNoQixPQUFPLElBQUk7RUFDYjtBQUNGLENBQUNrRCxPQUFBLENBQUFDLE9BQUEsR0FBQWpGLGNBQUEifQ==